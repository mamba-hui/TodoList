webpackJsonp([0],{"3v6S":function(t,e,o){"use strict";var n=o("bOdI"),s=o.n(n);e.a={props:["activeTodo","todoList"],computed:{todo:function(){if(this.activeTodo)return this.activeTodo;if(this.todoList.doing[0])return this.todoList.doing[0];var t;return t={title:"详情面板"},s()(t,"title","详情面板"),s()(t,"detail","内容描述"),s()(t,"createdAt",(new Date).toLocaleString()),s()(t,"done",!1),t}}}},"6h7B":function(t,e){},"7wQK":function(t,e,o){"use strict";e.a={props:["todoList"],methods:{removeTodo:function(t){this.$emit("removeTodo",t)},changeState:function(t,e){this.$emit("changeState",t,e)},toTop:function(t){this.$emit("toTop",t)},updateActiveTodo:function(t){this.$emit("updateActiveTodo",t)}}}},"8avJ":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("aside",{attrs:{id:"aside"}},[t.currentUser?t._e():o("SignInAndSignUp",{on:{updateUser:t.updateUser}}),t._v(" "),t.currentUser?o("div",{attrs:{id:"inputAndUser"}},[o("Panel",{attrs:{todoList:t.todoList,activeTodo:t.activeTodo}}),t._v(" "),o("TodoInput",{on:{pushTodo:t.pushTodo}}),t._v(" "),o("UserInfo",{attrs:{currentUser:t.currentUser},on:{updateUser:t.updateUser}})],1):t._e()],1),t._v(" "),o("Banner",{attrs:{currentUser:t.currentUser}}),t._v(" "),t.currentUser?o("TodoView",{attrs:{todoList:t.todoList},on:{removeTodo:t.removeTodo,changeState:t.changeState,toTop:t.toTop,updateActiveTodo:t.updateActiveTodo}}):t._e()],1)},s=[],i={render:n,staticRenderFns:s};e.a=i},"98WO":function(t,e,o){"use strict";function n(t){o("qHUe")}var s=o("rKME"),i=o("VG18"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports},CsV1:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"panel"},[o("div",{staticClass:"title"},[t._v("\n    "+t._s(t.todo.title)+"\n  ")]),t._v(" "),o("div",{staticClass:"detail"},[t._v("\n    "+t._s(t.todo.detail)+"\n  ")]),t._v(" "),o("div",{staticClass:"info"},[o("span",[t._v(t._s(t.todo.done?"已完成":"未完成"))]),t._v(" "),o("span",[t._v(t._s(t.todo.createdAt))])])])},s=[],i={render:n,staticRenderFns:s};e.a=i},JhKW:function(t,e,o){"use strict";function n(t){o("sfHy")}var s=o("3v6S"),i=o("CsV1"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports},KQYX:function(t,e,o){"use strict";function n(t){o("6h7B")}var s=o("bjRM"),i=o("pX+y"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports},KSfv:function(t,e,o){"use strict";function n(t){o("Vm89")}var s=o("7wQK"),i=o("aS3u"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports},M2Te:function(t,e,o){"use strict";function n(t){o("pZ8C")}var s=o("nCUj"),i=o("u1+q"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports},M93x:function(t,e,o){"use strict";function n(t){o("joxN")}var s=o("xJD8"),i=o("8avJ"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("uMhA"),s=(o.n(n),o("NcP2")),i=(o.n(s),o("7+uW")),a=o("M93x");i.a.config.productionTip=!1,new i.a({el:"#app",template:"<App/>",components:{App:a.a}})},NcP2:function(t,e){},"OTr+":function(t,e,o){"use strict";var n=o("RDvA");e.a={props:["currentUser"],methods:{logout:function(){n.a.User.logOut().then(function(){console.log("退出登录")}),this.$emit("updateUser"),window.location.reload()}}}},Ps6D:function(t,e){},RDvA:function(t,e,o){"use strict";var n=o("JnRc"),s=o.n(n);s.a.init({appId:"njknQNcvh38wERav1yua0D64-gzGzoHsz",appKey:"SbG3wTTAEAIGMMSbapS486z9"}),e.a=s.a},VG18:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:{opacity:t.currentUser},attrs:{id:"banner"}},[o("h2",[t._v("最简单的事件代办列表")]),t._v(" "),t._m(0)])},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"slogan"},[o("b",[t._v("高效率 慢生活")]),t._v(" "),o("br"),t._v(" "),o("span",[t._v("跟上时间的步伐 做时间的主人")])])}],i={render:n,staticRenderFns:s};e.a=i},Vm89:function(t,e){},aS3u:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"todoView"}},[o("div",{staticClass:"layout"},[o("div",{staticClass:"todos"},[o("h2",[t._v("正在进行")]),t._v(" "),o("transition-group",{attrs:{name:"list",mode:"out-in",tag:"ol"}},t._l(t.todoList.doing,function(e,n){return o("li",{key:e.createdAt},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"todo.done"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.done)?t._i(e.done,null)>-1:e.done},on:{click:function(o){t.changeState(n,e)},__c:function(o){var n=e.done,s=o.target,i=!!s.checked;if(Array.isArray(n)){var a=t._i(n,null);s.checked?a<0&&(e.done=n.concat([null])):a>-1&&(e.done=n.slice(0,a).concat(n.slice(a+1)))}else e.done=i}}}),t._v(" "),o("p",[o("span",{staticClass:"title",attrs:{title:"点击查看在左侧详情"},on:{click:function(o){t.updateActiveTodo(e)}}},[t._v(t._s(e.title))]),t._v(" "),o("span",{staticClass:"time"},[t._v(t._s(e.createdAt))]),t._v(" "),o("button",{staticClass:"btn",on:{click:function(o){t.toTop(e)}}},[t._v("↑")])])])}))],1),t._v(" "),o("div",{staticClass:"todosDone"},[o("h2",[t._v("已经完成")]),t._v(" "),o("transition-group",{attrs:{name:"list",mode:"out-in",tag:"ol"}},t._l(t.todoList.done,function(e,n){return o("li",{key:e.createdAt},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"todo.done"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.done)?t._i(e.done,null)>-1:e.done},on:{click:function(o){t.changeState(n,e)},__c:function(o){var n=e.done,s=o.target,i=!!s.checked;if(Array.isArray(n)){var a=t._i(n,null);s.checked?a<0&&(e.done=n.concat([null])):a>-1&&(e.done=n.slice(0,a).concat(n.slice(a+1)))}else e.done=i}}}),t._v(" "),o("p",[o("span",{staticClass:"title",attrs:{title:"点击查看在左侧详情"},on:{click:function(o){t.updateActiveTodo(e)}}},[t._v(t._s(e.title))]),t._v(" "),o("span",{staticClass:"time"},[t._v(t._s(e.createdAt))]),t._v(" "),o("button",{staticClass:"btn",on:{click:function(e){t.removeTodo(n)}}},[t._v("X")])])])}))],1)])])},s=[],i={render:n,staticRenderFns:s};e.a=i},bjRM:function(t,e,o){"use strict";e.a={data:function(){return{newTodo:{title:"",detail:""}}},methods:{addTodo:function(){/\S/.test(this.newTodo.title)?(this.$emit("pushTodo",{title:this.newTodo.title,detail:this.newTodo.detail,createdAt:(new Date).toLocaleString(),done:!1}),this.newTodo.title="",this.newTodo.detail=""):alert("请添加标题")}}}},joxN:function(t,e){},nCUj:function(t,e,o){"use strict";var n=o("RDvA");e.a={data:function(){return{actionType:"signIn",formData:{username:"",password:""}}},methods:{login:function(){var t=this;n.a.User.logIn(this.formData.username,this.formData.password).then(function(e){t.$emit("updateUser"),console.log("登录成功",e)}).catch(function(t){console.log("登录失败",t),alert("请输入正确的用户名和密码！")})},signUp:function(){var t=this,e=new n.a.User;e.setUsername(this.formData.username),e.setPassword(this.formData.password),e.signUp().then(function(e){t.$emit("updateUser"),console.log("注册成功",e)}).catch(function(t){console.log("注册失败",t),alert("注册失败，用户名可能被占用！")})}}}},"pX+y":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"todoInput"}},[o("div",{staticClass:"todoTitle"},[o("label",{attrs:{for:"todoTitle"}},[t._v("代办标题")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodo.title,expression:"newTodo.title"}],staticClass:"t-input",attrs:{id:"todoTitle",type:"text",placeholder:"请添加任务"},domProps:{value:t.newTodo.title},on:{input:function(e){e.target.composing||(t.newTodo.title=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"todoDetail"},[o("label",{attrs:{for:"todoDetail"}},[t._v("内容描述")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newTodo.detail,expression:"newTodo.detail"}],staticClass:"t-input",attrs:{id:"todoDetail",rows:"4",placeholder:"详细内容，可省略。。。"},domProps:{value:t.newTodo.detail},on:{input:function(e){e.target.composing||(t.newTodo.detail=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"addtodo"},[o("button",{staticClass:"btn",on:{click:t.addTodo}},[t._v("添加")])])])},s=[],i={render:n,staticRenderFns:s};e.a=i},pZ8C:function(t,e){},qHUe:function(t,e){},rKME:function(t,e,o){"use strict";e.a={props:["currentUser"]}},sfHy:function(t,e){},tY0i:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"userInfo"},[o("span",[t._v(t._s(t.currentUser.username))]),t._v(" "),o("button",{staticClass:"btn",on:{click:t.logout}},[t._v("退出")])])},s=[],i={render:n,staticRenderFns:s};e.a=i},"u1+q":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"signInAndSignUp"}},[o("h1",[t._v("TodoList")]),t._v(" "),o("div",{staticClass:"loginMethods"},[o("div",{staticClass:"btn",class:{active:"signIn"===t.actionType},on:{click:function(e){t.actionType="signIn"}}},[t._v("\n      登录\n    ")]),t._v(" "),o("div",{staticClass:"btn",class:{active:"signUp"===t.actionType},on:{click:function(e){t.actionType="signUp"}}},[t._v("\n      注册\n    ")])]),t._v(" "),o("div",{key:t.actionType,class:t.actionType},[o("form",{on:{submit:function(e){e.preventDefault(),"signIn"===t.actionType?t.login():t.signUp()}}},[o("div",{staticClass:"formRow"},[o("span",[t._v("用户名：")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"t-input",attrs:{type:"text"},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||(t.formData.username=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"formRow"},[o("span",[t._v("密码：")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"t-input",attrs:{type:"password"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||(t.formData.password=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"formAction"},[o("button",{staticClass:"btn",attrs:{type:"submit"}},[t._v(t._s("signIn"===t.actionType?"登录":"注册"))])])])])])},s=[],i={render:n,staticRenderFns:s};e.a=i},uMhA:function(t,e){},xJD8:function(t,e,o){"use strict";var n=o("mvHQ"),s=o.n(n),i=o("KSfv"),a=o("KQYX"),r=o("M2Te"),c=o("yw6p"),d=o("JhKW"),u=o("98WO"),l=o("RDvA");e.a={name:"app",components:{TodoView:i.a,TodoInput:a.a,SignInAndSignUp:r.a,UserInfo:c.a,Panel:d.a,Banner:u.a},data:function(){return{currentUser:null,todoList:{id:void 0,doing:[],done:[]},activeTodo:null}},methods:{updateUser:function(){this.currentUser=this.getCurrentUser(),this.fetchTodos()},getCurrentUser:function(){var t=l.a.User.current();if(t){return{id:t.id,createdAt:t.createdAt,username:t.attributes.username}}return null},pushTodo:function(t){this.todoList.doing.push(t),this.saveOrUpdateTodos()},removeTodo:function(t){this.todoList.done.splice(t,1),this.saveOrUpdateTodos()},changeState:function(t,e){var o=!1===e.done?"doing":"done",n=!0===e.done?"doing":"done";this.todoList[o].push(e),this.todoList[n].splice(t,1),this.saveOrUpdateTodos()},toTop:function(t){this.todoList.doing.sort(function(e,o){return o===t?1:0}),this.saveOrUpdateTodos()},updateActiveTodo:function(t){this.activeTodo=t},fetchTodos:function(){var t=this;if(this.currentUser){new l.a.Query("AllTodos").find().then(function(e){var o=e[0];t.todoList=JSON.parse(o.attributes.content),console.log("fetch得到的数据",e)}).catch(function(t){console.log("fetch数据失败",t)})}},saveOrUpdateTodos:function(){this.todoList.id?this.updateTodos():this.saveTodos()},saveTodos:function(){var t=this,e=s()(this.todoList),o=new l.a.Object.extend("AllTodos"),n=new o;n.set("content",e);var i=new l.a.ACL;i.setWriteAccess(l.a.User.current(),!0),i.setReadAccess(l.a.User.current(),!0),n.setACL(i),n.save().then(function(e){t.todoList.id=e.id,console.log("创建Todo并保存成功")}).catch(function(t){console.log("创建Todo并保存失败",t),alert("创建时保存失败")})},updateTodos:function(){var t=s()(this.todoList),e=l.a.Object.createWithoutData("AllTodos",this.todoList.id);e.set("content",t),e.save().then(function(){console.log("数据更新成功")})}},created:function(){this.currentUser=this.getCurrentUser(),this.fetchTodos()}}},yw6p:function(t,e,o){"use strict";function n(t){o("Ps6D")}var s=o("OTr+"),i=o("tY0i"),a=o("VU/8"),r=n,c=a(s.a,i.a,r,null,null);e.a=c.exports}},["NHnr"]);
//# sourceMappingURL=app.c372d659ab9e55cea5c7.js.map